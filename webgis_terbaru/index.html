<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet-control-geocoder.Geocoder.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/css/bootstrap.min.css">
        <style>
            #map {
                width: 100%;
                height: 600px;
            }
            body {
                padding-top: 56px;
            }
            .navbar {
                background-color: #343a40;
            }
            .navbar-brand {
                color: #ffffff;
            }
            .navbar-nav .nav-link {
                color: #ffffff;
            }
            footer {
                background-color: #343a40;
                color: white;
                padding: 10px;
                position: fixed;
                bottom: 0;
                width: 100%;
                text-align: center;
            }
            .dropdown-menu {
                width: 300px;
            }
        </style>
        <title>WebGIS Application</title>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
            <a class="navbar-brand" href="#">WebGIS Pendidikan di Malang</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Home
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <h6 class="dropdown-header">Filter Layer</h6>
                            <a class="dropdown-item" href="#" onclick="toggleBaseLayers()">Filter Base Maps</a>
                            <a class="dropdown-item" href="#" onclick="toggleSchoolLayers()">Filter School Points</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="map"></div>
        <footer>
            <p>&copy; 2024 WebGIS Application. All rights reserved.</p>
        </footer>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/js/bootstrap.min.js"></script>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-control-geocoder.Geocoder.js"></script>
        <script src="data/UNIVERSITAS_10.js"></script>
        <script src="data/SMAdanSMK_11.js"></script>
        <script src="data/SMP_12.js"></script>
        <script src="data/SD_13.js"></script>
        <script src="data/PAUD_14.js"></script>
        <script>
            var highlightLayer;
            function highlightFeature(e) {
                highlightLayer = e.target;
                if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
                    highlightLayer.setStyle({
                        color: '#ffff00',
                    });
                } else {
                    highlightLayer.setStyle({
                        fillColor: '#ffff00',
                        fillOpacity: 1
                    });
                }
            }
            var map = L.map('map', {
                zoomControl:true, maxZoom:28, minZoom:1
            }).fitBounds([[-7.99422786361963,112.55898065993564],[-7.957029164766317,112.62873063498375]]);
            var hash = new L.Hash(map);
            map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
            var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
            function removeEmptyRowsFromPopupContent(content, feature) {
                var tempDiv = document.createElement('div');
                tempDiv.innerHTML = content;
                var rows = tempDiv.querySelectorAll('tr');
                for (var i = 0; i < rows.length; i++) {
                    var td = rows[i].querySelector('td.visible-with-data');
                    var key = td ? td.id : '';
                    if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                        rows[i].parentNode.removeChild(rows[i]);
                    }
                }
                return tempDiv.innerHTML;
            }
            document.querySelector(".leaflet-popup-pane").addEventListener("load", function(event) {
                var tagName = event.target.tagName,
                popup = map._popup;
                if (tagName === "IMG" && popup && !popup._updated) {
                    popup._updated = true;
                    popup.update();
                }
            }, true);
            L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
            var bounds_group = new L.featureGroup([]);
            function setBounds() {
            }
            map.createPane('pane_MapzenGlobalTerrain_0');
            map.getPane('pane_MapzenGlobalTerrain_0').style.zIndex = 400;
            var layer_MapzenGlobalTerrain_0 = L.tileLayer('https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png', {
                pane: 'pane_MapzenGlobalTerrain_0',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 15
            });
            layer_MapzenGlobalTerrain_0;
            map.addLayer(layer_MapzenGlobalTerrain_0);
            map.createPane('pane_GoogleHybrid_1');
            map.getPane('pane_GoogleHybrid_1').style.zIndex = 401;
            var layer_GoogleHybrid_1 = L.tileLayer('http://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}', {
                pane: 'pane_GoogleHybrid_1',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_GoogleHybrid_1;
            map.addLayer(layer_GoogleHybrid_1);
            map.createPane('pane_GoogleMaps_2');
            map.getPane('pane_GoogleMaps_2').style.zIndex = 402;
            var layer_GoogleMaps_2 = L.tileLayer('http://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}', {
                pane: 'pane_GoogleMaps_2',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_GoogleMaps_2;
            map.addLayer(layer_GoogleMaps_2);
            map.createPane('pane_EsriWorldImagery_3');
            map.getPane('pane_EsriWorldImagery_3').style.zIndex = 403;
            var layer_EsriWorldImagery_3 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                pane: 'pane_EsriWorldImagery_3',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_EsriWorldImagery_3;
            map.addLayer(layer_EsriWorldImagery_3);
            map.createPane('pane_EsriWorldStreetMap_4');
            map.getPane('pane_EsriWorldStreetMap_4').style.zIndex = 404;
            var layer_EsriWorldStreetMap_4 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
                pane: 'pane_EsriWorldStreetMap_4',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_EsriWorldStreetMap_4;
            map.addLayer(layer_EsriWorldStreetMap_4);
            map.createPane('pane_OpenStreetMapHumanitarian_5');
            map.getPane('pane_OpenStreetMapHumanitarian_5').style.zIndex = 405;
            var layer_OpenStreetMapHumanitarian_5 = L.tileLayer('https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
                pane: 'pane_OpenStreetMapHumanitarian_5',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_OpenStreetMapHumanitarian_5;
            map.addLayer(layer_OpenStreetMapHumanitarian_5);
            map.createPane('pane_CartoDBDarkMatter_6');
            map.getPane('pane_CartoDBDarkMatter_6').style.zIndex = 406;
            var layer_CartoDBDarkMatter_6 = L.tileLayer('http://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
                pane: 'pane_CartoDBDarkMatter_6',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_CartoDBDarkMatter_6;
            map.addLayer(layer_CartoDBDarkMatter_6);
            map.createPane('pane_GoogleMapsSatellite_7');
            map.getPane('pane_GoogleMapsSatellite_7').style.zIndex = 407;
            var layer_GoogleMapsSatellite_7 = L.tileLayer('http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}', {
                pane: 'pane_GoogleMapsSatellite_7',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_GoogleMapsSatellite_7;
            map.addLayer(layer_GoogleMapsSatellite_7);
            map.createPane('pane_CartoDBPositron_8');
            map.getPane('pane_CartoDBPositron_8').style.zIndex = 408;
            var layer_CartoDBPositron_8 = L.tileLayer('http://basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
                pane: 'pane_CartoDBPositron_8',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_CartoDBPositron_8;
            map.addLayer(layer_CartoDBPositron_8);
            map.createPane('pane_OpenStreetMapStandard_9');
            map.getPane('pane_OpenStreetMapStandard_9').style.zIndex = 409;
            var layer_OpenStreetMapStandard_9 = L.tileLayer('https://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                pane: 'pane_OpenStreetMapStandard_9',
                opacity: 1.0,
                attribution: '',
                minZoom: 1,
                maxZoom: 28,
                minNativeZoom: 0,
                maxNativeZoom: 18
            });
            layer_OpenStreetMapStandard_9;
            map.addLayer(layer_OpenStreetMapStandard_9);
            function pop_UNIVERSITAS_10(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        for (var i in e.target._eventParents) {
                            if (typeof e.target._eventParents[i].resetStyle === 'function') {
                                e.target._eventParents[i].resetStyle(e.target);
                            }
                        }
                    },
                    mouseover: highlightFeature,
                });
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Nama Unive</th>\
                            <td class="visible-with-data" id="Nama Unive">' + (feature.properties['Nama Unive'] !== null ? autolinker.link(feature.properties['Nama Unive'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">x</th>\
                            <td class="visible-with-data" id="x">' + (feature.properties['x'] !== null ? autolinker.link(feature.properties['x'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">y</th>\
                            <td class="visible-with-data" id="y">' + (feature.properties['y'] !== null ? autolinker.link(feature.properties['y'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Akreditasi</th>\
                            <td class="visible-with-data" id="Akreditasi">' + (feature.properties['Akreditasi'] !== null ? autolinker.link(feature.properties['Akreditasi'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Buka</th>\
                            <td class="visible-with-data" id="Buka">' + (feature.properties['Buka'] !== null ? autolinker.link(feature.properties['Buka'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['Gambar'] !== null ? '<img src="images/' + String(feature.properties['Gambar']).replace(/[\\\/:]/g, '_').trim() + '">' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Jarak</th>\
                            <td class="visible-with-data" id="Jarak">' + (feature.properties['Jarak'] !== null ? autolinker.link(feature.properties['Jarak'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Rating</th>\
                            <td class="visible-with-data" id="Rating">' + (feature.properties['Rating'] !== null ? autolinker.link(feature.properties['Rating'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_UNIVERSITAS_10_0() {
                return {
                    pane: 'pane_UNIVERSITAS_10',
                    radius: 4.0,
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1,
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(248,244,4,1.0)',
                    interactive: true,
                }
            }
            map.createPane('pane_UNIVERSITAS_10');
            map.getPane('pane_UNIVERSITAS_10').style.zIndex = 410;
            map.getPane('pane_UNIVERSITAS_10').style['mix-blend-mode'] = 'normal';
            var layer_UNIVERSITAS_10 = new L.geoJson(json_UNIVERSITAS_10, {
                attribution: '',
                interactive: true,
                dataVar: 'json_UNIVERSITAS_10',
                layerName: 'layer_UNIVERSITAS_10',
                pane: 'pane_UNIVERSITAS_10',
                onEachFeature: pop_UNIVERSITAS_10,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_UNIVERSITAS_10_0(feature));
                },
            });
            bounds_group.addLayer(layer_UNIVERSITAS_10);
            map.addLayer(layer_UNIVERSITAS_10);
            function pop_SMAdanSMK_11(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        for (var i in e.target._eventParents) {
                            if (typeof e.target._eventParents[i].resetStyle === 'function') {
                                e.target._eventParents[i].resetStyle(e.target);
                            }
                        }
                    },
                    mouseover: highlightFeature,
                });
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Nama SMA/S</th>\
                            <td class="visible-with-data" id="Nama SMA/S">' + (feature.properties['Nama SMA/S'] !== null ? autolinker.link(feature.properties['Nama SMA/S'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">x</th>\
                            <td class="visible-with-data" id="x">' + (feature.properties['x'] !== null ? autolinker.link(feature.properties['x'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">y</th>\
                            <td class="visible-with-data" id="y">' + (feature.properties['y'] !== null ? autolinker.link(feature.properties['y'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Akreditasi</th>\
                            <td class="visible-with-data" id="Akreditasi">' + (feature.properties['Akreditasi'] !== null ? autolinker.link(feature.properties['Akreditasi'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Buka</th>\
                            <td class="visible-with-data" id="Buka">' + (feature.properties['Buka'] !== null ? autolinker.link(feature.properties['Buka'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['Gambar'] !== null ? '<img src="images/' + String(feature.properties['Gambar']).replace(/[\\\/:]/g, '_').trim() + '">' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Jarak</th>\
                            <td class="visible-with-data" id="Jarak">' + (feature.properties['Jarak'] !== null ? autolinker.link(feature.properties['Jarak'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Rating</th>\
                            <td class="visible-with-data" id="Rating">' + (feature.properties['Rating'] !== null ? autolinker.link(feature.properties['Rating'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_SMAdanSMK_11_0() {
                return {
                    pane: 'pane_SMAdanSMK_11',
                    radius: 4.0,
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1,
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(180,205,218,1.0)',
                    interactive: true,
                }
            }
            map.createPane('pane_SMAdanSMK_11');
            map.getPane('pane_SMAdanSMK_11').style.zIndex = 411;
            map.getPane('pane_SMAdanSMK_11').style['mix-blend-mode'] = 'normal';
            var layer_SMAdanSMK_11 = new L.geoJson(json_SMAdanSMK_11, {
                attribution: '',
                interactive: true,
                dataVar: 'json_SMAdanSMK_11',
                layerName: 'layer_SMAdanSMK_11',
                pane: 'pane_SMAdanSMK_11',
                onEachFeature: pop_SMAdanSMK_11,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_SMAdanSMK_11_0(feature));
                },
            });
            bounds_group.addLayer(layer_SMAdanSMK_11);
            map.addLayer(layer_SMAdanSMK_11);
            function pop_SMP_12(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        for (var i in e.target._eventParents) {
                            if (typeof e.target._eventParents[i].resetStyle === 'function') {
                                e.target._eventParents[i].resetStyle(e.target);
                            }
                        }
                    },
                    mouseover: highlightFeature,
                });
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Nama SMP</th>\
                            <td class="visible-with-data" id="Nama SMP">' + (feature.properties['Nama SMP'] !== null ? autolinker.link(feature.properties['Nama SMP'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">x</th>\
                            <td class="visible-with-data" id="x">' + (feature.properties['x'] !== null ? autolinker.link(feature.properties['x'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">y</th>\
                            <td>' + (feature.properties['y'] !== null ? autolinker.link(feature.properties['y'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Akreditasi</th>\
                            <td>' + (feature.properties['Akreditasi'] !== null ? autolinker.link(feature.properties['Akreditasi'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Buka</th>\
                            <td>' + (feature.properties['Buka'] !== null ? autolinker.link(feature.properties['Buka'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['GBR'] !== null ? '<img src="images/' + String(feature.properties['GBR']).replace(/[\\\/:]/g, '_').trim() + '">' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Jarak</th>\
                            <td class="visible-with-data" id="Jarak">' + (feature.properties['Jarak'] !== null ? autolinker.link(feature.properties['Jarak'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Rating</th>\
                            <td class="visible-with-data" id="Rating">' + (feature.properties['Rating'] !== null ? autolinker.link(feature.properties['Rating'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_SMP_12_0() {
                return {
                    pane: 'pane_SMP_12',
                    radius: 4.0,
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1,
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(55,84,246,1.0)',
                    interactive: true,
                }
            }
            map.createPane('pane_SMP_12');
            map.getPane('pane_SMP_12').style.zIndex = 412;
            map.getPane('pane_SMP_12').style['mix-blend-mode'] = 'normal';
            var layer_SMP_12 = new L.geoJson(json_SMP_12, {
                attribution: '',
                interactive: true,
                dataVar: 'json_SMP_12',
                layerName: 'layer_SMP_12',
                pane: 'pane_SMP_12',
                onEachFeature: pop_SMP_12,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_SMP_12_0(feature));
                },
            });
            bounds_group.addLayer(layer_SMP_12);
            map.addLayer(layer_SMP_12);
            function pop_SD_13(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        for (var i in e.target._eventParents) {
                            if (typeof e.target._eventParents[i].resetStyle === 'function') {
                                e.target._eventParents[i].resetStyle(e.target);
                            }
                        }
                    },
                    mouseover: highlightFeature,
                });
                var popupContent = '<table>\
                        <tr>\
                            <th scope="row">Nama SD</th>\
                            <td class="visible-with-data" id="Nama SD">' + (feature.properties['Nama SD'] !== null ? autolinker.link(feature.properties['Nama SD'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">x</th>\
                            <td class="visible-with-data" id="x">' + (feature.properties['x'] !== null ? autolinker.link(feature.properties['x'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">y</th>\
                            <td class="visible-with-data" id="y">' + (feature.properties['y'] !== null ? autolinker.link(feature.properties['y'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Akreditasi</th>\
                            <td class="visible-with-data" id="Akreditasi">' + (feature.properties['Akreditasi'] !== null ? autolinker.link(feature.properties['Akreditasi'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Buka</th>\
                            <td class="visible-with-data" id="Buka">' + (feature.properties['Buka'] !== null ? autolinker.link(feature.properties['Buka'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['Gbr'] !== null ? '<img src="images/' + String(feature.properties['Gbr']).replace(/[\\\/:]/g, '_').trim() + '">' : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Jarak</th>\
                            <td class="visible-with-data" id="Jarak">' + (feature.properties['Jarak'] !== null ? autolinker.link(feature.properties['Jarak'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Rating</th>\
                            <td class="visible-with-data" id="Rating">' + (feature.properties['Rating'] !== null ? autolinker.link(feature.properties['Rating'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_SD_13_0() {
                return {
                    pane: 'pane_SD_13',
                    radius: 4.0,
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1,
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(248,25,9,1.0)',
                    interactive: true,
                }
            }
            map.createPane('pane_SD_13');
            map.getPane('pane_SD_13').style.zIndex = 413;
            map.getPane('pane_SD_13').style['mix-blend-mode'] = 'normal';
            var layer_SD_13 = new L.geoJson(json_SD_13, {
                attribution: '',
                interactive: true,
                dataVar: 'json_SD_13',
                layerName: 'layer_SD_13',
                pane: 'pane_SD_13',
                onEachFeature: pop_SD_13,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_SD_13_0(feature));
                },
            });
            bounds_group.addLayer(layer_SD_13);
            map.addLayer(layer_SD_13);
            function pop_PAUD_14(feature, layer) {
                layer.on({
                    mouseout: function(e) {
                        for (var i in e.target._eventParents) {
                            if (typeof e.target._eventParents[i].resetStyle === 'function') {
                                e.target._eventParents[i].resetStyle(e.target);
                            }
                        }
                    },
                    mouseover: highlightFeature,
                });
                var popupContent = '<table>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['Nama Perpu'] !== null ? autolinker.link(feature.properties['Nama Perpu'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">x</th>\
                            <td class="visible-with-data" id="x">' + (feature.properties['x'] !== null ? autolinker.link(feature.properties['x'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">y</th>\
                            <td class="visible-with-data" id="y">' + (feature.properties['y'] !== null ? autolinker.link(feature.properties['y'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <td colspan="2">' + (feature.properties['Gambar'] !== null ? autolinker.link(feature.properties['Gambar'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Jarak</th>\
                            <td class="visible-with-data" id="Jarak">' + (feature.properties['Jarak'] !== null ? autolinker.link(feature.properties['Jarak'].toLocaleString()) : '') + '</td>\
                        </tr>\
                        <tr>\
                            <th scope="row">Rating</th>\
                            <td class="visible-with-data" id="Rating">' + (feature.properties['Rating'] !== null ? autolinker.link(feature.properties['Rating'].toLocaleString()) : '') + '</td>\
                        </tr>\
                    </table>';
                layer.bindPopup(popupContent, {maxHeight: 400});
                var popup = layer.getPopup();
                var content = popup.getContent();
                var updatedContent = removeEmptyRowsFromPopupContent(content, feature);
                popup.setContent(updatedContent);
            }

            function style_PAUD_14_0() {
                return {
                    pane: 'pane_PAUD_14',
                    radius: 4.0,
                    opacity: 1,
                    color: 'rgba(35,35,35,1.0)',
                    dashArray: '',
                    lineCap: 'butt',
                    lineJoin: 'miter',
                    weight: 1,
                    fill: true,
                    fillOpacity: 1,
                    fillColor: 'rgba(190,178,151,1.0)',
                    interactive: true,
                }
            }
            map.createPane('pane_PAUD_14');
            map.getPane('pane_PAUD_14').style.zIndex = 414;
            map.getPane('pane_PAUD_14').style['mix-blend-mode'] = 'normal';
            var layer_PAUD_14 = new L.geoJson(json_PAUD_14, {
                attribution: '',
                interactive: true,
                dataVar: 'json_PAUD_14',
                layerName: 'layer_PAUD_14',
                pane: 'pane_PAUD_14',
                onEachFeature: pop_PAUD_14,
                pointToLayer: function (feature, latlng) {
                    var context = {
                        feature: feature,
                        variables: {}
                    };
                    return L.circleMarker(latlng, style_PAUD_14_0(feature));
                },
            });
            bounds_group.addLayer(layer_PAUD_14);
            map.addLayer(layer_PAUD_14);
            var osmGeocoder = new L.Control.Geocoder({
                collapsed: true,
                position: 'topleft',
                text: 'Search',
                title: 'Testing'
            }).addTo(map);
            document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
            .className += ' fa fa-search';
            document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
            .title += 'Search for a place';
            var baseMaps = {};
            var overlaysTree = [
                {label: '<img src="legend/PAUD_14.png" />  PAUD', layer: layer_PAUD_14},
                {label: '<img src="legend/SD_13.png" /> SD', layer: layer_SD_13},
                {label: '<img src="legend/SMP_12.png" /> SMP', layer: layer_SMP_12},
                {label: '<img src="legend/SMAdanSMK_11.png" /> SMA dan SMK', layer: layer_SMAdanSMK_11},
                {label: '<img src="legend/UNIVERSITAS_10.png" /> UNIVERSITAS', layer: layer_UNIVERSITAS_10},
                {label: "OpenStreetMap Standard", layer: layer_OpenStreetMapStandard_9},
                {label: "CartoDB Positron", layer: layer_CartoDBPositron_8},
                {label: "Google Maps Satellite", layer: layer_GoogleMapsSatellite_7},
                {label: "CartoDB Dark Matter", layer: layer_CartoDBDarkMatter_6},
                {label: "OpenStreetMap Humanitarian", layer: layer_OpenStreetMapHumanitarian_5},
                {label: "Esri World Street Map", layer: layer_EsriWorldStreetMap_4},
                {label: "Esri World Imagery", layer: layer_EsriWorldImagery_3},
                {label: "Google Maps", layer: layer_GoogleMaps_2},
                {label: "Google Hybrid", layer: layer_GoogleHybrid_1},
                {label: "Mapzen Global Terrain", layer: layer_MapzenGlobalTerrain_0},]
            var lay = L.control.layers.tree(null, overlaysTree,{
                collapsed: true,
            });
            lay.addTo(map);
            setBounds();
            var i = 0;
            layer_UNIVERSITAS_10.eachLayer(function(layer) {
                var context = {
                    feature: layer.feature,
                    variables: {}
                };
                layer.bindTooltip((layer.feature.properties['Nama Unive'] !== null?String('<div style="color: #323232; font-size: 10pt; font-family: \'Open Sans\', sans-serif;">' + layer.feature.properties['Nama Unive']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_UNIVERSITAS_10'});
                labels.push(layer);
                totalMarkers += 1;
                layer.added = true;
                addLabel(layer, i);
                i++;
            });
            var i = 0;
            layer_SMAdanSMK_11.eachLayer(function(layer) {
                var context = {
                    feature: layer.feature,
                    variables: {}
                };
                layer.bindTooltip((layer.feature.properties['Nama SMA/S'] !== null?String('<div style="color: #323232; font-size: 10pt; font-family: \'Open Sans\', sans-serif;">' + layer.feature.properties['Nama SMA/S']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_SMAdanSMK_11'});
                labels.push(layer);
                totalMarkers += 1;
                layer.added = true;
                addLabel(layer, i);
                i++;
            });
            var i = 0;
            layer_SMP_12.eachLayer(function(layer) {
                var context = {
                    feature: layer.feature,
                    variables: {}
                };
                layer.bindTooltip((layer.feature.properties['Nama SMP'] !== null?String('<div style="color: #323232; font-size: 10pt; font-family: \'Open Sans\', sans-serif;">' + layer.feature.properties['Nama SMP']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_SMP_12'});
                labels.push(layer);
                totalMarkers += 1;
                layer.added = true;
                addLabel(layer, i);
                i++;
            });
            var i = 0;
            layer_SD_13.eachLayer(function(layer) {
                var context = {
                    feature: layer.feature,
                    variables: {}
                };
                layer.bindTooltip((layer.feature.properties['Nama SD'] !== null?String('<div style="color: #323232; font-size: 10pt; font-family: \'Open Sans\', sans-serif;">' + layer.feature.properties['Nama SD']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_SD_13'});
                labels.push(layer);
                totalMarkers += 1;
                layer.added = true;
                addLabel(layer, i);
                i++;
            });
            resetLabels([layer_UNIVERSITAS_10,layer_SMAdanSMK_11,layer_SMP_12,layer_SD_13]);
            map.on("zoomend", function(){
                resetLabels([layer_UNIVERSITAS_10,layer_SMAdanSMK_11,layer_SMP_12,layer_SD_13]);
            });
            map.on("layeradd", function(){
                resetLabels([layer_UNIVERSITAS_10,layer_SMAdanSMK_11,layer_SMP_12,layer_SD_13]);
            });
            map.on("layerremove", function(){
                resetLabels([layer_UNIVERSITAS_10,layer_SMAdanSMK_11,layer_SMP_12,layer_SD_13]);
            });

            // Functions to toggle layers
            function toggleBaseLayers() {
                var baseLayers = [layer_MapzenGlobalTerrain_0, layer_GoogleHybrid_1, layer_GoogleMaps_2, layer_EsriWorldImagery_3, layer_EsriWorldStreetMap_4, layer_OpenStreetMapHumanitarian_5, layer_CartoDBDarkMatter_6, layer_GoogleMapsSatellite_7, layer_CartoDBPositron_8, layer_OpenStreetMapStandard_9];
                baseLayers.forEach(function(layer) {
                    if (map.hasLayer(layer)) {
                        map.removeLayer(layer);
                    } else {
                        map.addLayer(layer);
                    }
                });
            }

            function toggleSchoolLayers() {
                var schoolLayers = [layer_UNIVERSITAS_10, layer_SMAdanSMK_11, layer_SMP_12, layer_SD_13, layer_PAUD_14];
                schoolLayers.forEach(function(layer) {
                    if (map.hasLayer(layer)) {
                        map.removeLayer(layer);
                    } else {
                        map.addLayer(layer);
                    }
                });
            }
        </script>
    </body>
</html>
